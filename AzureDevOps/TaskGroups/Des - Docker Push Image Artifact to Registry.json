{
    "tasks": [
        {
            "environment": {},
            "displayName": "Load image",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "containerregistrytype": "Azure Container Registry",
                "dockerRegistryEndpoint": "",
                "azureSubscriptionEndpoint": "",
                "azureContainerRegistry": "",
                "command": "load",
                "dockerFile": "**/Dockerfile",
                "arguments": "-i $(System.DefaultWorkingDirectory)/$(buildDefinitionName)/drop/$(fileName).tar.gz",
                "useDefaultContext": "true",
                "buildContext": "",
                "pushMultipleImages": "false",
                "tagMultipleImages": "false",
                "imageName": "$(Build.Repository.Name):$(Build.BuildId)",
                "imageNamesPath": "",
                "qualifyImageName": "true",
                "includeSourceTags": "false",
                "includeLatestTag": "false",
                "addDefaultLabels": "true",
                "imageDigestFile": "",
                "containerName": "",
                "ports": "",
                "volumes": "",
                "envVars": "",
                "workingDirectory": "",
                "entrypointOverride": "",
                "containerCommand": "",
                "runInBackground": "true",
                "restartPolicy": "no",
                "maxRestartRetries": "",
                "dockerHostEndpoint": "",
                "enforceDockerNamingConvention": "true",
                "memoryLimit": ""
            },
            "task": {
                "id": "e28912f1-0114-4464-802a-a3a35437fd16",
                "versionSpec": "1.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Tag image",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "containerregistrytype": "Azure Container Registry",
                "dockerRegistryEndpoint": "",
                "azureSubscriptionEndpoint": "$(azureSubscription)",
                "azureContainerRegistry": "",
                "command": "Tag image",
                "dockerFile": "**/Dockerfile",
                "arguments": "$(TargetRegistry)/$(ImageName)",
                "useDefaultContext": "true",
                "buildContext": "",
                "pushMultipleImages": "false",
                "tagMultipleImages": "false",
                "imageName": "$(SourceRegistry)/$(ImageName)",
                "imageNamesPath": "",
                "qualifyImageName": "false",
                "includeSourceTags": "false",
                "includeLatestTag": "false",
                "addDefaultLabels": "true",
                "imageDigestFile": "",
                "containerName": "",
                "ports": "",
                "volumes": "",
                "envVars": "",
                "workingDirectory": "",
                "entrypointOverride": "",
                "containerCommand": "",
                "runInBackground": "true",
                "restartPolicy": "no",
                "maxRestartRetries": "",
                "dockerHostEndpoint": "",
                "enforceDockerNamingConvention": "true",
                "memoryLimit": ""
            },
            "task": {
                "id": "e28912f1-0114-4464-802a-a3a35437fd16",
                "versionSpec": "1.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Push Image",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "containerregistrytype": "Azure Container Registry",
                "dockerRegistryEndpoint": "",
                "azureSubscriptionEndpoint": "$(azureSubscription)",
                "azureContainerRegistry": "$(TargetRegistry)",
                "command": "Push an image",
                "dockerFile": "**/Dockerfile",
                "arguments": "",
                "useDefaultContext": "true",
                "buildContext": "",
                "pushMultipleImages": "false",
                "tagMultipleImages": "false",
                "imageName": "$(TargetRegistry)/$(ImageName)",
                "imageNamesPath": "",
                "qualifyImageName": "false",
                "includeSourceTags": "false",
                "includeLatestTag": "false",
                "addDefaultLabels": "true",
                "imageDigestFile": "",
                "containerName": "",
                "ports": "",
                "volumes": "",
                "envVars": "",
                "workingDirectory": "",
                "entrypointOverride": "",
                "containerCommand": "",
                "runInBackground": "true",
                "restartPolicy": "no",
                "maxRestartRetries": "",
                "dockerHostEndpoint": "",
                "enforceDockerNamingConvention": "true",
                "memoryLimit": ""
            },
            "task": {
                "id": "e28912f1-0114-4464-802a-a3a35437fd16",
                "versionSpec": "1.*",
                "definitionType": "task"
            }
        }
    ],
    "runsOn": [
        "Agent",
        "DeploymentGroup"
    ],
    "revision": 6,
    "createdBy": {
        "displayName": "Marco De Sanctis",
        "id": "20e3e1f8-da74-4df2-b217-1e703a8943cf",
        "uniqueName": ""
    },
    "createdOn": "2019-02-10T20:26:59.000Z",
    "modifiedBy": {
        "displayName": "Marco De Sanctis",
        "id": "20e3e1f8-da74-4df2-b217-1e703a8943cf",
        "uniqueName": ""
    },
    "modifiedOn": "2019-02-20T20:56:13.857Z",
    "comment": "",
    "id": "87f5a606-bbe1-4625-be57-7bb240b4b37c",
    "name": "Des - Docker Push Image Artifact to Registry",
    "version": {
        "major": 1,
        "minor": 0,
        "patch": 0,
        "isTest": false
    },
    "iconUrl": "https://cdn.vsassets.io/v/M146_20190206.11/_content/icon-meta-task.png",
    "friendlyName": "Des - Docker Push Image Artifact to Registry",
    "description": "This task group retrieves an image from the build artifacts, loads it and pushes it to an Azure Container Registry",
    "category": "Deploy",
    "definitionType": "metaTask",
    "author": "Marco De Sanctis",
    "demands": [],
    "groups": [],
    "inputs": [
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "azureSubscription",
            "label": "azureSubscription",
            "defaultValue": "",
            "required": true,
            "type": "connectedService:AzureRM",
            "helpMarkDown": "Select an Azure subscription",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "buildDefinitionName",
            "label": "buildDefinitionName",
            "defaultValue": "",
            "required": true,
            "type": "string",
            "helpMarkDown": "The name of the build definition",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "fileName",
            "label": "fileName",
            "defaultValue": "",
            "required": true,
            "type": "string",
            "helpMarkDown": "The file name",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "ImageName",
            "label": "ImageName",
            "defaultValue": "",
            "required": true,
            "type": "string",
            "helpMarkDown": "",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "SourceRegistry",
            "label": "SourceRegistry",
            "defaultValue": "",
            "required": true,
            "type": "string",
            "helpMarkDown": "The original registry FQN",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "TargetRegistry",
            "label": "TargetRegistry",
            "defaultValue": "",
            "required": true,
            "type": "string",
            "helpMarkDown": "The target registry FQN",
            "groupName": ""
        }
    ],
    "satisfies": [],
    "sourceDefinitions": [],
    "dataSourceBindings": [],
    "instanceNameFormat": "Task group: Des - Docker Push Image Artifact to Registry $(azureSubscription)",
    "preJobExecution": {},
    "execution": {},
    "postJobExecution": {}
}